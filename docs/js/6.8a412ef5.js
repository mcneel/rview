(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"1c86":function(e,n,t){"use strict";t.r(n);var i,o,r,a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("q-page",{staticClass:"fit row"},[t("div",{ref:"myCanvas",staticClass:"col q-gutter-xs",attrs:{id:"cvs"}})])},c=[],s=(t("63d9"),t("28a5"),t("5a89")),d=t("4721"),w=t("1bee");function l(){var e=w["a"].getActiveDoc();e.threeScene&&e.threeScene.dispose(),e.threeScene=new s["s"],e.threeScene.background=new s["d"](.9,.9,.9);var n=new s["e"](16777215);n.position.set(0,0,1),e.threeScene.add(n);var t=new s["e"](6710886);t.position.set(.2,.2,-1),e.threeScene.add(t)}function u(){s["n"].DefaultUp=new s["w"](0,0,1),l(),i=new s["o"](30,window.innerWidth/window.innerHeight,1,1e3),i.position.z=40,o=new s["x"]({antialias:!0}),o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight);var e=document.getElementById("cvs");e.appendChild(o.domElement),r=new d["a"](i,o.domElement),window.addEventListener("resize",h,!1),v()}var v=function e(){requestAnimationFrame(e),r.update();var n=w["a"].getActiveDoc();o.render(n.threeScene,i)};function h(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight),v()}function p(e,n){var t=new s["c"],i=t.parse(e.toThreejsJSON());0===n.r&&0===n.g&&0===n.b&&(n.r=255,n.g=255,n.b=255);var o=new s["d"](n.r/255,n.g/255,n.b/255),r=new s["m"]({color:o,side:s["f"]});return new s["l"](i,r)}function f(){console.log("activedoc changed"),l();for(var e=w["a"].getRhino3dm(),n=w["a"].getActiveDoc(),t=n.rhinoDoc,r=t.objects(),a=function(i){var o=r.get(i);if(null==o)return"continue";var a=o.geometry(),c=o.attributes(),d=t.layers().get(c.layerIndex),w=d.fullPath.split("::")[0];n.threeObjectsOnLayer[w]||(n.threeObjectsOnLayer[w]=[]);var l=c.drawColor(t),u=[];if(a instanceof e.Mesh){var v=p(a,l);u.push(v)}if(a instanceof e.Brep){for(var h=a.faces(),f=0;f<h.count;f++){var g=h.get(f),b=g.getMesh(e.MeshType.Any);if(b){var m=p(b,l);u.push(m),b.delete()}g.delete()}h.delete()}if(a instanceof e.Curve){var y=21;a instanceof e.LineCurve?y=2:a instanceof e.PolylineCurve&&(y=a.pointCount);for(var S=new s["b"],x=new Float32Array(3*y),C=a.domain,P=y-1,j=0;j<y;j++){var A=C[0]+j/P*(C[1]-C[0]),E=a.pointAt(A);x[3*j]=E[0],x[3*j+1]=E[1],x[3*j+2]=E[2]}S.setAttribute("position",new s["a"](x,3));var O=new s["d"](l.r/255,l.g/255,l.b/255),z=new s["j"]({color:O}),D=new s["i"](S,z);u.push(D)}if(a instanceof e.Point){var L=new s["q"]({color:l}),W=new s["h"],q=a.location;W.vertices.push(new s["w"](q[0],q[1],q[2])),u.push(new s["p"](W,L))}u.forEach((function(e){n.threeScene.add(e),n.threeObjectsOnLayer[w].push(e)})),o.delete(),a.delete(),c.delete()},c=0;c<r.count;c++)a(c);var d=r.getBoundingBox();r.delete();var u=new e.ViewportInfo;u.isPerspectiveProjection=!0;var v=new s["v"](0,0);o.getSize(v),u.screenPort=[0,0,v.x,v.y],u.dollyExtents(d,0);var h=u.cameraLocation;i.position.x=h[0],i.position.y=h[1],i.position.z=h[2],u.delete(),w["a"].updateVisibility()}var g={created:function(){w["a"].addActiveDocChangedEventWatcher(f)},mounted:function(){u(),f()}},b=g,m=t("2877"),y=t("eebe"),S=t.n(y),x=t("9989"),C=Object(m["a"])(b,a,c,!1,null,null,null);n["default"]=C.exports;S()(C,"components",{QPage:x["a"]})}}]);