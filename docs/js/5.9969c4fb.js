(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"8b24":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"flex flex-center",attrs:{id:"cvs"}},[e.viewmodel.docExists?e._e():n("q-card",{attrs:{flat:""}},[n("q-img",{attrs:{alt:"rview",src:"statics/logo.png"}}),n("q-card-section",[n("div",{staticClass:"text-h6"},[e._v("rview WIP")])])],1),e.viewmodel.docExists?n("q-page-sticky",{attrs:{position:"bottom-left",offset:[10,10]}},[n("q-fab",{attrs:{color:"primary",icon:"keyboard_arrow_up",direction:"up"},model:{value:e.expandSticky,callback:function(t){e.expandSticky=t},expression:"expandSticky"}},[n("q-fab-action",{attrs:{color:e.panMode?"secondary":"primary",icon:"pan_tool"},on:{click:function(t){return e.togglePan()}}},[n("q-tooltip",{attrs:{"transition-show":"flip-right","transition-hide":"flip-left"}},[e._v("\n          Pan\n        ")])],1),n("q-fab-action",{attrs:{color:"primary",icon:"zoom_out_map"},on:{click:function(t){return e.zoomExtents()}}},[n("q-tooltip",{attrs:{"transition-show":"flip-right","transition-hide":"flip-left"}},[e._v("\n          Zoom Extents\n        ")])],1)],1)],1):e._e()],1)},o=[],r=(n("63d9"),n("28a5"),n("5a89")),a=n("4721"),s=n("1bee"),c={renderer:null,camera:null,controls:null,initialize:function(){if(null==this.renderer){r["n"].DefaultUp=new r["w"](0,0,1),this.renderer=new r["x"]({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight);var e=document.getElementById("cvs");e.appendChild(this.renderer.domElement),window.addEventListener("resize",(function(){return d(!0)}),!1),this.camera=new r["o"](30,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.z=40,this.controls=new a["a"](this.camera,this.renderer.domElement)}},setToPerspectiveCamera:function(){var e=s["a"].viewModel();e.perspectiveCamera||(e.perspectiveCamera=!0,this.zoomExtents(!0))},setToParallelCamera:function(){var e=s["a"].viewModel();e.perspectiveCamera&&(e.perspectiveCamera=!1,this.zoomExtents(!0))},zoomExtents:function(e){e&&(s["a"].viewModel().perspectiveCamera,this.camera=new r["o"](30,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.z=40,this.controls.object=this.camera);var t=s["a"].getRhino3dm(),n=s["a"].visibleObjectsBoundingBox(),i=new t.ViewportInfo;i.isPerspectiveProjection=s["a"].viewModel().perspectiveCamera;var o=new r["v"](0,0);c.renderer.getSize(o),i.screenPort=[0,0,o.x,o.y],i.dollyExtents(n,0),n.delete();var a=i.cameraLocation;this.camera.position.x=a[0],this.camera.position.y=a[1],this.camera.position.z=a[2],this.camera.updateProjectionMatrix(),this.controls.target.x=0,this.controls.target.y=0,this.controls.target.z=0,i.delete()}},d=function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(c.camera.aspect=window.innerWidth/window.innerHeight,c.camera.updateProjectionMatrix(),c.renderer.setSize(window.innerWidth,window.innerHeight)),requestAnimationFrame(e),c.controls.update();var n=s["a"].getActiveDoc();c.renderer.render(n.threeScene,c.camera)};function l(){c.initialize();var e=s["a"].getActiveDoc();e.threeScene&&e.threeScene.dispose(),e.threeScene=new r["s"],e.threeScene.background=new r["d"](.9,.9,.9);var t=new r["e"](16777215);t.position.set(0,0,1),e.threeScene.add(t);var n=new r["e"](6710886);n.position.set(.2,.2,-1),e.threeScene.add(n)}function p(e,t){var n=new r["c"],i=n.parse(e.toThreejsJSON());0===t.r&&0===t.g&&0===t.b&&(t.r=255,t.g=255,t.b=255);var o=new r["d"](t.r/255,t.g/255,t.b/255),a=new r["m"]({color:o,side:r["f"]});return new r["l"](i,a)}function h(){console.log("Building Scene"),l();for(var e=s["a"].getRhino3dm(),t=s["a"].getActiveDoc(),n=t.rhinoDoc,i=n.objects(),o=function(o){var a=i.get(o);if(null==a)return"continue";var s=a.geometry(),c=a.attributes(),d=n.layers().get(c.layerIndex),l=d.fullPath.split("::")[0];t.threeObjectsOnLayer[l]||(t.threeObjectsOnLayer[l]=[]);var h=c.drawColor(n),u=[];if(s instanceof e.Mesh){var w=p(s,h);u.push(w)}if(s instanceof e.Brep){for(var v=s.faces(),m=0;m<v.count;m++){var f=v.get(m),g=f.getMesh(e.MeshType.Any);if(g){var b=p(g,h);u.push(b),g.delete()}f.delete()}v.delete()}if(s instanceof e.Curve){var x=21;s instanceof e.LineCurve?x=2:s instanceof e.PolylineCurve&&(x=s.pointCount);for(var y=new r["b"],C=new Float32Array(3*x),E=s.domain,P=x-1,S=0;S<x;S++){var z=E[0]+S/P*(E[1]-E[0]),k=s.pointAt(z);C[3*S]=k[0],C[3*S+1]=k[1],C[3*S+2]=k[2]}y.setAttribute("position",new r["a"](C,3));var M=new r["d"](h.r/255,h.g/255,h.b/255),j=new r["j"]({color:M}),A=new r["i"](y,j);u.push(A)}if(s instanceof e.Point){var O=new r["q"]({color:h}),T=new r["h"],q=s.location;T.vertices.push(new r["w"](q[0],q[1],q[2])),u.push(new r["p"](T,O))}u.forEach((function(e){t.threeScene.add(e),t.threeObjectsOnLayer[l].push(e)})),a.delete(),s.delete(),c.delete()},a=0;a<i.count;a++)o(a);i.delete(),s["a"].updateVisibility(),c.zoomExtents(!0),d()}var u={data:function(){var e=s["a"].viewModel();return{expandSticky:!1,panMode:!1,viewmodel:e}},created:function(){s["a"].addActiveDocChangedEventWatcher(h),this.onChangeCamera=this.updateCameraProjection},methods:{updateCameraProjection:function(){this.perspectiveCamera?c.SetToPerspectiveCamera():c.SetToParallelCamera()},zoomExtents:function(){c.zoomExtents(!0)},togglePan:function(){this.panMode=!this.panMode,this.expandSticky=this.panMode,this.panMode?(c.controls.mouseButtons.LEFT=r["k"].PAN,c.controls.touches.ONE=r["u"].PAN):(c.controls.mouseButtons.LEFT=r["k"].ROTATE,c.controls.touches.ONE=r["u"].ROTATE)}}},w=u,v=n("2877"),m=n("eebe"),f=n.n(m),g=n("9989"),b=n("f09f"),x=n("068f"),y=n("a370"),C=n("de5e"),E=n("c294"),P=n("72db"),S=n("05c0"),z=Object(v["a"])(w,i,o,!1,null,null,null);t["default"]=z.exports;f()(z,"components",{QPage:g["a"],QCard:b["a"],QImg:x["a"],QCardSection:y["a"],QPageSticky:C["a"],QFab:E["a"],QFabAction:P["a"],QTooltip:S["a"]})}}]);